################################################################################
# GENERAL LINUX UTILITIES & TROUBLESHOOTING
# Purpose: General troubleshooting tools, utilities, and diagnostics
# Used for: System diagnosis, file operations, text processing
################################################################################

# ========== FIND COMMAND LOCATION ==========
# Find where a command is installed
which traceroute
which ubridge
which qemu-system-x86_64

# Show full path of command
type command-name

# Show command in PATH
whereis command-name

# ========== GREP & TEXT SEARCH ==========
# Search for pattern in file
grep "search-term" filename.txt

# Case-insensitive search
grep -i "search-term" filename.txt

# Recursive search in directory
grep -r "search-term" /path/to/directory

# Show line numbers
grep -n "search-term" filename.txt

# Show lines NOT containing pattern
grep -v "search-term" filename.txt

# Count matching lines
grep -c "search-term" filename.txt

# Show context around match (3 lines before and after)
grep -C 3 "search-term" filename.txt

# ========== FILE OPERATIONS ==========
# Copy file
cp source.txt destination.txt

# Copy directory recursively
cp -r source-dir destination-dir

# Move/rename file
mv old-name.txt new-name.txt

# Delete file
rm filename.txt

# Delete directory and contents
rm -r directory-name

# Create empty file
touch filename.txt

# Create file with content
cat > filename.txt << EOF
content here
EOF

# ========== TEXT FILE VIEWERS ==========
# View entire file
cat filename.txt

# View file with pagination
less filename.txt

# View first 10 lines
head -n 10 filename.txt

# View last 10 lines
tail -n 10 filename.txt

# Follow file as it's written to (like tail -f)
tail -f /var/log/syslog

# View file with line numbers
cat -n filename.txt

# ========== TEXT EDITORS ==========
# Edit file with nano (easy)
nano filename.txt

# Edit file with vi/vim (advanced)
vi filename.txt
vim filename.txt

# Edit with sed (stream editor)
sed 's/old-text/new-text/g' filename.txt

# Edit with awk
awk '{print $1}' filename.txt

# ========== FILE PERMISSIONS & OWNERSHIP ==========
# View file permissions
ls -l filename.txt

# Change file permissions
chmod 755 filename.txt

# Change permissions recursively
chmod -R 755 directory/

# Change file owner
chown user:group filename.txt

# Change owner recursively
chown -R user:group directory/

# Permission reference:
# 7 = read + write + execute (rwx)
# 6 = read + write (rw-)
# 5 = read + execute (r-x)
# 4 = read only (r--)

# ========== COMPRESS & ARCHIVE ==========
# Create tar archive
tar -cvf archive.tar file1 file2 file3

# Create tar.gz (compressed)
tar -cvzf archive.tar.gz directory/

# Extract tar archive
tar -xvf archive.tar

# Extract tar.gz
tar -xzvf archive.tar.gz

# Create zip archive
zip -r archive.zip directory/

# Extract zip
unzip archive.zip

# ========== SYSTEM INFORMATION ==========
# Show system information
uname -a

# Show Linux distribution
cat /etc/os-release

# Show kernel version
uname -r

# Show uptime
uptime

# Show current date/time
date

# Show hardware info
lshw

# Show CPU info
lscpu

# Show memory info
free -h

# Show PCI devices
lspci

# Show USB devices
lsusb

# ========== ENVIRONMENT VARIABLES ==========
# Show all environment variables
env

# Show specific variable
echo $PATH

# Set variable temporarily
export VAR_NAME="value"

# Set variable permanently (add to ~/.bashrc)
echo 'export VAR_NAME="value"' >> ~/.bashrc

# ========== SHELL BASICS ==========
# Print to screen
echo "Hello World"

# Print with variables
echo "My name is $USER"

# Run command and capture output
output=$(command-name)

# Run command in background
command-name &

# Run multiple commands
command1 ; command2 ; command3

# Run command if previous succeeded
command1 && command2

# Run command if previous failed
command1 || command2

# Pipe output to another command
command1 | command2

# Redirect output to file
command > output.txt

# Append to file
command >> output.txt

# Redirect errors to file
command 2> errors.txt

# Redirect both output and errors
command &> all-output.txt

# ========== CRON JOBS & SCHEDULING ==========
# Edit crontab
crontab -e

# List cron jobs
crontab -l

# Remove all cron jobs
crontab -r

# Cron syntax: minute hour day month weekday command
# Example: Run script every day at 2 AM
# 0 2 * * * /path/to/script.sh

# Run every hour
# 0 * * * * /path/to/script.sh

# Run every 5 minutes
# */5 * * * * /path/to/script.sh

# ========== USER MANAGEMENT ==========
# Create new user
sudo useradd newuser

# Create user with home directory
sudo useradd -m newuser

# Add user to group
sudo usermod -aG groupname username

# List all users
cat /etc/passwd

# Show current user
whoami

# Show user groups
groups

# Change user password
sudo passwd username

# Delete user
sudo userdel username

# Delete user and home directory
sudo userdel -r username

# ========== NETWORK DIAGNOSTICS ==========
# Ping host
ping -c 4 192.168.0.1

# Test DNS resolution
nslookup example.com
dig example.com

# Show network connections
netstat -an

# Show listening ports
ss -tuln

# Show network interfaces
ifconfig
ip addr show

# Trace network path to host
traceroute example.com
tracepath example.com

# Show DNS servers
cat /etc/resolv.conf

# ========== PERFORMANCE MONITORING ==========
# Show CPU and memory usage
top

# Show memory usage
free -h

# Show disk usage
df -h

# Show directory size
du -sh /path

# Show load average
uptime

# Show process stats
ps aux

# ========== HELP COMMANDS ==========
# Show command manual
man command-name

# Show command help
command-name --help

# Show brief command info
whatis command-name

# Search help files
apropos keyword

# ========== QUICK FIXES & HISTORY SHORTCUTS ==========
# Run previous command as root
sudo !!                       # re-run last command with sudo
# Search command history interactively or via grep
Ctrl+R                        # interactive reverse search (shell)
history | grep keyword        # grep history
# Create a temporary alias in current shell
alias ll='ls -lah'
# Make alias permanent (add to ~/.bashrc)
echo "alias ll='ls -lah'" >> ~/.bashrc
# Run command repeatedly (every 2 seconds)
watch -n 2 command-name

# ========== KEYBOARD SHORTCUTS ==========
# Tab - autocomplete command or filename
# Ctrl+C - stop running command
# Ctrl+Z - pause running command
# Ctrl+A - move cursor to start of line
# Ctrl+E - move cursor to end of line
# Ctrl+R - search command history
# Ctrl+L - clear screen
# !! - repeat last command
# !keyword - repeat last command starting with keyword
