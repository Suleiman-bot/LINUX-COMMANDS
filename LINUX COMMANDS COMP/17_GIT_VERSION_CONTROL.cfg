################################################################################
# GIT VERSION CONTROL - Complete Workflow
# Purpose: Clone, branch, commit, push, and manage pull requests
# Used for: Team collaboration, code version management, repository maintenance
################################################################################

# ========== INITIAL GIT SETUP ==========
# Set your Git identity globally (first time only)
git config --global user.name "Your-Name"
git config --global user.email "your.email@example.com"

# Set credentials for specific repository
git config user.name "Your-Name"
git config user.email "your.email@example.com"

# Example configuration
git config --global user.name "Suleiman-Abdulsalam"
git config --global user.email "suleiman.abdulsalam@kasicloud.com"

# Verify configuration
git config --list

# ========== CLONE REPOSITORY ==========
# Clone repository for the first time
git clone https://github.com/KasiCloud/sysadmin.git

# Clone into specific directory
git clone https://github.com/KasiCloud/sysadmin.git my-folder

# Navigate to cloned repository
cd sysadmin

# ========== BRANCH MANAGEMENT ==========
# List local branches
git branch

# List all branches (local and remote)
git branch -a

# Switch to existing branch
git checkout develop

# Update branch with latest remote changes
git pull origin develop

# Create new feature branch
git checkout -b feature/suleiman-updates

# Delete local branch
git branch -d feature/suleiman-updates

# Force delete branch
git branch -D feature/suleiman-updates

# ========== STAGE & COMMIT CHANGES ==========
# Check what files changed
git status

# Add specific file to staging
git add filename.cfg

# Add all changes to staging
git add .

# Commit changes with message
git commit -m "update: added new commands"

# Commit with detailed message
git commit -m "update: suleiman latest changes" -m "Added LVM storage setup, improved documentation"

# ========== PUSH CHANGES TO GITHUB ==========
# Push to remote branch (first time)
git push -u origin feature/suleiman-updates

# Push to remote branch (subsequent times)
git push

# Push to specific branch
git push origin develop

# Force push (use with caution!)
git push --force-with-lease

# ========== PULL LATEST CHANGES ==========
# Pull latest changes from remote
git pull origin develop

# Fetch without merging
git fetch origin

# ========== MERGE BRANCHES ==========
# Merge develop branch into current branch
git checkout develop
git pull origin develop
git checkout feature/suleiman-updates
git merge develop

# Resolve merge conflicts if any
# Fix conflicts in files, then:
git add .
git commit -m "merge: resolved conflicts"
git push

# ========== REBASE ONTO DEVELOP (ADVANCED) ==========
# Clean history by rebasing instead of merging
git checkout feature/suleiman-updates
git fetch origin
git rebase origin/develop

# If conflicts appear during rebase:
# 1. Resolve conflicts in files
# 2. Stage resolved files
git add .

# 3. Continue rebase
git rebase --continue

# 4. Abort rebase if needed
git rebase --abort

# 5. Force push after rebase (changes history)
git push --force-with-lease

# ========== CREATE PULL REQUEST ==========
# Create PR using GitHub web interface:
# 1. Push your branch to GitHub
# 2. Go to repository page
# 3. Click "Create Pull Request"
# 4. Select: Base: develop, Compare: feature/suleiman-updates
# 5. Add title and description
# 6. Submit for review

# OR use GitHub CLI:
gh pr create --base develop --head feature/suleiman-updates --title "Update: Added Proposed FW Policies" --body "Created new FIREWALL-POLICIES.cfg file"

# ========== VIEW PULL REQUEST ==========
# View all PRs
gh pr list

# View specific PR
gh pr view PR_NUMBER

# Checkout PR locally
gh pr checkout PR_NUMBER

# ========== AFTER PR IS APPROVED ==========
# Manager merges PR into develop

# Update local develop branch
git checkout develop
git pull origin develop

# Delete feature branch locally
git branch -d feature/suleiman-updates

# Delete feature branch from remote
git push origin --delete feature/suleiman-updates

# ========== VIEW COMMIT HISTORY ==========
# Show commit history
git log

# Show short commit history
git log --oneline

# Show last 10 commits
git log -10

# Show commits by specific author
git log --author="Suleiman"

# Show commits since specific date
git log --since="2024-01-01"

# Show specific file history
git log -- filename.cfg

# ========== VIEW CHANGES ==========
# Show changes in working directory
git diff

# Show changes staged for commit
git diff --staged

# Show changes between branches
git diff develop feature/suleiman-updates

# Show changes in specific file
git diff filename.cfg

# ========== UNDO CHANGES ==========
# Discard changes in working directory
git checkout -- filename.cfg

# Unstage file (remove from staging)
git reset HEAD filename.cfg

# Undo last commit but keep changes
git reset --soft HEAD~1

# Undo last commit and discard changes
git reset --hard HEAD~1

# Revert commit (creates new commit that undoes it)
git revert COMMIT_SHA

# ========== TAGS & RELEASES ==========
# Create tag for release
git tag -a v1.0.0 -m "Version 1.0.0"

# Push tags to remote
git push origin --tags

# Show all tags
git tag -l

# Delete local tag
git tag -d v1.0.0

# Delete remote tag
git push origin --delete v1.0.0

# ========== DAILY WORKFLOW (SIMPLE VERSION) ==========
# Update develop branch
git checkout develop
git pull origin develop

# Switch to feature branch
git checkout feature/suleiman-updates

# Merge develop to stay updated
git merge develop

# Make changes, then:
git add .
git commit -m "my update description"
git push

# ========== TROUBLESHOOTING ==========
# Check remote URL
git remote -v

# Change remote URL
git remote set-url origin https://github.com/user/repo.git

# View branch tracking
git branch -vv

# Stash changes temporarily
git stash

# Restore stashed changes
git stash pop

# See all stashes
git stash list

# Clean untracked files
git clean -fd

# ========== GIT CONFIGURATION BEST PRACTICES ==========
# Set default editor for commits
git config --global core.editor "nano"

# Set default branch name
git config --global init.defaultBranch main

# Configure line ending handling
git config --global core.autocrlf true

# Show branch in terminal
# Add to ~/.bashrc or ~/.bash_profile:
# PS1="$PS1\$(git rev-parse --abbrev-ref HEAD 2>/dev/null | sed 's/^/ [/')\$(git rev-parse --abbrev-ref HEAD 2>/dev/null | sed 's/$/.]/') "

# ========== TOP 23 GIT COMMANDS (QUICK LIST) ==========
# 1) Clone repository
git clone <repo-url>
# 2) Show working tree status
git status
# 3) Stage files
git add <file>
# 4) Commit staged changes
git commit -m "message"
# 5) Pull latest changes
git pull
# 6) Push commits
git push
# 7) List branches
git branch
# 8) Create branch
git branch <name>
# 9) Switch branch
git checkout <name>
# 10) Create and switch
git checkout -b <name>
# 11) Merge branches
git merge <branch>
# 12) Rebase branch onto another
git rebase <branch>
# 13) View commit history
git log --oneline
# 14) Show differences
git diff
# 15) Show a commit
git show <commit>
# 16) Annotate file with authors
git blame <file>
# 17) Reset commits (dangerous)
git reset --hard HEAD^
# 18) Revert a commit safely
git revert <commit>
# 19) Stash changes
git stash
# 20) Pop stash
git stash pop
# 21) Fetch only
git fetch
# 22) Cherry-pick a commit
git cherry-pick <commit>
# 23) View reflog for recovery
git reflog
